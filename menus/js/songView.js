let songTitle;
let description;
let performancesList;
let lyricsSource;
let lyricsText;

let Song = {
   
};

let Songs = {
    wimo: {
        desc: {
            fan: `
            <p>"What I'm Made Of..." is the second Crush 40 track on Sonic Heroes, and has been remarked multiple times by Johnny as his favourite Crush 40 song of all time. 
            <p>Jun had already created a short demo of "What I'm Made Of..." before the title track of the game, Sonic Heroes, was even composed, but it was initially rejected by the team.</p>
            <p>Insisting that the song be used in the game, late into development it was decided it would be used as the track for the final boss; Jun then informed Johnny about the track (who was in the middle of a camping trip with his family), and how it was needed to be written quickly.</p>
            <p>And so, inside of a tour bus' kitchen area, Johnny began writing the lyrics to the track, and by Summer 2003 an early demo featuring background vocals was completed. By Fall 2003, the track was completely finished.</p>
            `,
            other: [
                { 
                    heading: "Jun Senoue", 
                    subHeading: "(Written by <a href='https://twitter.com/crush40/status/454934664549908480' target='_blank'>Jun on Twitter</a>, describing the 2 Nights 2 Remember setlist)", 
                    text:`
                        <p>For [the 2 Nights 2 Remember performance], I played "What I'm Made Of" with my "82" instead of my Sonic guitar for the first time - I just wanted to play my favourite song on that guitar!</p>
                        <p>One especially notable moment was at the end of the second day of the show, where the whole audience sang the final "What I'm Made Of..." in unison - it gave me goosebumps!</p>
                    ` }
            ]
        },
        lyrics: {
            src: [ 
                { n: "Driving Through Forever", id: "driving" }
            ],
            text: `
<p>I don't care what you're thinking<br/>
As you turn to me<br/>
Cause what I have in my two hands<br/>
Is enough to set me free<br/>
I could fight the feeling<br/>
To resist it over time<br/>
But when it's just too much to take<br/>
You sneak up from behind</p>
<p>Is it me, you say, you're looking for<br/>
Let me show you who I am and what I'm here for... here for...</p>
<p>Try to reach inside of me, try to drain my energy<br/>
Let me show you just what I'm made of<br/>
Simple curiosity tries to take a bite of me<br/>
Let me show you just what I'm made of now...</p>
<p>Like a million faces<br/>
I've recognized them all<br/>
And one by one they've all become<br/>
A black mark on the floor</p>
<p>Is it me, you say, you're looking for<br/>
Let me show you who I am and what I have in store.... in store...</p>
<p>Try to reach inside of me, try to drain my energy<br/>
Let me show you just what I'm made of<br/>
Simple curiosity tries to take a bite of me<br/>
Let me show you just what I'm made of now...</p>
<p>You can take another life long try<br/>
You can take another try...</p>
<p>Try to reach inside of me, try to drain my energy<br/>
Let me show you just what I'm made of<br/>
Simple curiosity tries to take a bite of me<br/>
Let me show you just what I'm made of now...</p>
<p>Try to reach inside of me, try to drain my energy<br/>
Let me show you just what I'm made of</p>
            `
        },
        performances: [
            { id: "tgs08" },
            { id: "sos10" },
            { id: "t11" },
            { id: "t12" },
            { id: "sb12" },
            { id: "jgmf13" },
            { id: "sb13" },
            { id: "twoNights" },
            { id: "expoTNT" },
            { id: "youmacon15" },
            { id: "sonic25th" },
            { id: "sos16" },
            { id: "tmg17" },
            { id: "mgc18" },
            { id: "puma18" },
            { id: "jgmf18" },
            { id: "tmg18" },
            { id: "mgc19" },
            { id: "tmg19" }
        ]
    },
    ll: {
        desc: {
            fan: `
            <p>As the ending song of <i>Sonic and The Black Knight</i>, Live Life creates a perfect continuity from Knight of The Wind by utilizing a variant of the latter's main riff.</p>
            <p>Bringing the violins back in full force, the song proves yet again Johnny's incredible talent for ballads, delivering one of his most soulful performances in any Crush 40 song - it's certainly brought some Crush 40 fans to tears more than once!</p>
            <p>Furthermore the lyrics perfectly convey the game's message of living life to the fullest in the time you have; even though according to Johnny they were written in a hotel room mere days before the deadline!</p>
            `,
            other: [
                { 
                    heading: "Jun Senoue", 
                    subHeading: "(Written by <a href='https://twitter.com/crush40/status/454927117495435264' target='_blank'>Jun on Twitter</a>, describing the 2 Nights 2 Remember setlist)", 
                    text:`
                        <p>A song I wrote in a studio in Tokyo with Johnny a long time ago.</p>
                        <p>I remember I was almost crying from the crowd reaction when I played this song at [Summer of Sonic 2012], and I really wanted to play this song with a full band, so I was very happy to be able to do that [at the 2 Nights 2 Remember show].
                    ` }
            ]
        },
        lyrics: {
            src: [ 
                { n: "Super Sonic Songs", id: "sss" }
            ],
            text: `
<p>Take a look inside your heart<br />
What once seemed fair today<br />
Tomorrow it may not<br />
Just a walk or a journey<br />
Don't stop reaching high<br />
Don't let the time pass you by</p>
<p>So many ways that you can try to forget<br />
So many ways you'll find you wake up to regret</p>
<p>Someday, one day we'll say live life I know<br />
Hold on hold tight<br />
Don't let go don't lose sight</p>
<p>Feeling like the road<br />
Is winding you on every turn<br />
But there are lessons to learn<br />
Take a look inside your heart<br />
What once seemed impossible<br />
Today is not</p>
<p>So many ways that you can try to forget<br />
So many ways you'll find you wake up to regret</p>
<p>Someday, one day we'll say live life I know<br />
Hold on hold tight<br />
Don't let go don't lose sight<br />
Someday, one day we'll say live life I know<br />
Hold on hold tight<br />
Don't let go</p>
<p>I can't imagine I can't imagine<br />
Making it on your own<br />
You've got it inside you've got it inside of you...<br />
So let it out...!</p>
<p>Someday, one day we'll say live life I know<br />
Hold on hold tight<br />
Don't let go don't lose sight<br />
Someday, one day we'll say live life I know<br />
Hold on hold tight<br />
Don't let go don't live life</p>
<p>Live Life...</p>
<p>Live Life...<br />
Don't let go...</p>
<p>Live Life...<br />
Live Life...</p>
            `
        },
        performances: [
            { id: "sos12" },
            { id: "twoNights" },
            { id: "jgmf18", d: "Featuring a real violinist!" },
        ]
    },
    iam: {
        desc: {
            fan: `
            <p>"I Am... All Of Me" is the main theme of "Shadow The Hedgehog". Originally, Magna-fi (who also wrote & recorded "All Hail Shadow") had written a track called "Who I Am" to be the game's main theme, but was excluded due to complications with the band's then label, Aezra.</p>
            <p>The game itself goes for a radically different approach in comparison to previous games (taking inspiration from the then-emerging mature game market), so Jun followed suit with a soundtrack focusing on Heavy & Industrial Metal.</p> 
            <p>"I Am... All Of Me" stands out as the game & soundtrack's crowning achievement, being the first song the player hears during the opening cinematic, along with the final boss. Despite the game's polarizing reception, the track has become regarded as one of Crush 40's best, being a fan favorite & commonly performed during their live shows.</p>
            `,
            other: [
                { 
                    heading: "Jun Senoue", 
                    subHeading: "(Written by <a href='https://twitter.com/crush40/status/454926790746599425' target='_blank'>Jun on Twitter</a>, describing the 2 Nights 2 Remember setlist)", 
                    text:`
                        <p>The main theme of Shadow the Hedgehog, which was tuned down to C and made dark and heavy.</p>
                        <p>Both Johnny and I love this song, and the way the venue fired up [at the 2 Nights 2 Remember show] when the introductory part of this song came in was just thrilling, regardless of how many times we've experienced it!</p>
                        <p>The air changes in an instant!</p>
                    ` }
            ]
        },
        lyrics: {
            src: [ 
                { n: "Driving Through Forever", id: "driving" }
            ],
            text: `
<p>I hear no speak no evil<br />
Black writing's on the wall<br />
Unleashed a million faces<br />
And one by one they fall<br />
Black hearted evil or<br />
Brave hearted hero<br />
I am all I am all I am...</p>
<p>Go ahead and try to see thru me<br />
Do it if you dare<br />
One step forward two steps back I'm here</p>
<p>Do it, do it, do it, do it</p>
<p>Can you see all of me<br />
Walk into my mystery<br />
Step inside and hold on for dear life<br />
Do you rememeber me<br />
Capture you or set you free<br />
I am all I am all of me...<br />
I am... I'm all of me...</p>
<p>I see and feel the evil<br />
My hands will crush em' all<br />
You think you have the answers<br />
I'll laugh and watch you fall<br />
Black hearted evil or<br />
Brave hearted hero<br />
I am all I am all I am...</p>
<p>Go ahead and try to see thru me<br />
Do it if you dare<br />
One step forward two steps back I'm here</p>
<p>Do it, do it, do it, do it</p>
<p>Can you see all of me<br />
Walk into my mystery<br />
Step inside and hold on for dear life<br />
Do you rememeber me<br />
Capture you or set you free<br />
I am all I am all of me...<br />
I am... I'm all of me...</p>
<p>I am I am everyone, everywhere, anyhow, anyway, any will, any day<br />
I am I am everyone, everywhere, anyhow, anyway, any will, any day<br />
I Am... I Am... I Am...<br />
I Am... I Am... I Am...</p>
<p>Do it, do it, do it, do it</p>
<p>Can you see all of me<br />
Walk into my mystery<br />
Step inside and hold on for dear life<br />
Do you rememeber me<br />
Capture you or set you free<br />
I am all I am all of me...<br />
I am... I'm all of me...</p>
            `
        },
        performances: [
            { id: "tgs08" },
            { id: "sos10" },
            { id: "t11" },
            { id: "t12" },
            { id: "sb12" },
            { id: "jgmf13" },
            { id: "sb13" },
            { id: "twoNights" },
            { id: "expoTNT" },
            { id: "youmacon15" },
            { id: "sonic25th" },
            { id: "sos16" },
            { id: "tmg17" },
            { id: "mgc18" },
            { id: "puma18" },
            { id: "jgmf18" },
            { id: "tmg18" },
            { id: "mgc19" },
            { id: "tmg19" },
            { id: "symphony" }
        ]
    }
};

window.addEventListener('load', () => {
    songTitle = document.querySelector("#songTitle");
    description = document.querySelector("#descText");
    lyricsSource = document.querySelector("#lyricsSource");
    lyricsText = document.querySelector("#lyricsText");
    performancesList = document.querySelector("#performancesList")

    let afterS = document.URL.split('?')[1].substring(2); // Trim off the "s="
    Populate(Crush40Songs[afterS.toLowerCase()], Songs[afterS.toLowerCase()]);

    window.parent.postMessage('!800px', '*');
});

function Populate(basicSong, song)
{
    songTitle.innerText = basicSong.t;
    PopulateDescription(song);
    PopulateLyrics(song);
    PopulatePerformances(song);
}

function PopulateLyrics(song) 
{
    let srcPara = document.createElement("p");
    srcPara.insertAdjacentText('beforeEnd', "(Sourced from the ");

    for (let src in song.lyrics.src)
    {
        let itm = song.lyrics.src[src];

        if (itm.id)
        {
            let link = document.createElement("a");
            link.innerText = itm.n;
            link.addEventListener('click', () => window.parent.postMessage('@albumView?a=' + itm.id, '*'));
            srcPara.appendChild(link);
        }
        else
            srcPara.insertAdjacentText('beforeEnd', itm.n);

        if (src < song.lyrics.src.length - 1)
            srcPara.insertAdjacentText('beforeEnd', src == song.lyrics.src.length - 2 ? " and " : ", ");
    }

    srcPara.insertAdjacentText('beforeEnd', song.lyrics.src.length > 1 ? " booklets)" : " booklet)");
    lyricsSource.appendChild(srcPara);
    lyricsText.innerHTML = song.lyrics.text;
}

function PopulatePerformances(song)
{
    for (let performance of song.performances)
    {
        let gig = Crush40Performances[performance.id];

        let newPerf = document.createElement("li");
        newPerf.classList.add("performance");

        let main = document.createElement("div");
        main.classList.add("main");

        // Title
        let title = document.createElement("p");
        title.classList.add("title");
        title.innerText = gig.n;
        main.appendChild(title);

        // Year
        let year = document.createElement("p");
        year.classList.add("year");
        year.innerHTML = "<b>" + gig.y + "</b>";
        main.appendChild(year);

        newPerf.appendChild(main);

        // Description
        if (performance.d)
        {
            let desc = document.createElement("p");
            desc.classList.add("description");
            desc.innerHTML = performance.d;
            newPerf.appendChild(desc);
        }

        performancesList.appendChild(newPerf);
    }
}

function PopulateDescription(song)
{
    AppendDesc({ heading: "Fan Description", text: song.desc.fan });

    for (let i of song.desc.other)
        AppendDesc(i);
}

function AppendDesc(desc)
{
    description.appendChild(document.createElement("hr"));
    
    let heading = document.createElement("h3");
    heading.classList.add("heading");
    heading.innerText = desc.heading;
    description.appendChild(heading);

    if (desc.subHeading)
    {
        let subHeading = document.createElement("p");
        subHeading.classList.add("subHeading");
        subHeading.innerHTML = desc.subHeading;
        description.appendChild(subHeading);
    }

    let text = document.createElement("div");
    text.classList.add("text");
    text.innerHTML = desc.text;
    description.appendChild(text);
}